!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.webnote=t():e.webnote=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";var o;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=automate.service({namespace:"webnote",key:"noteService"})(o=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this))).zIndex=0,e.notes=[],e.isEditing=!1,e.events={editStateChange:new automate.Message},e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,automate.Service),n=t,(o=[{key:"nextZIndex",value:function(){return++this.zIndex}},{key:"isMaxZIndex",value:function(e){return e>=this.zIndex}},{key:"create",value:function(e){var t={content:"new note",position:{x:20,y:20},size:{width:180,height:180},zIndex:this.nextZIndex()};return e.push(t),t}},{key:"getList",value:function(){return this.notes}},{key:"load",value:function(){var e=this,t=localStorage.getItem("notes");t&&(this.notes=JSON.parse(t),this.notes.forEach((function(t){t.zIndex>e.zIndex&&(e.zIndex=t.zIndex)})))}},{key:"save",value:function(){localStorage.setItem("notes",JSON.stringify(this.getList()))}},{key:"removeAll",value:function(e){e.length=0}},{key:"remove",value:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},{key:"toggleEdit",value:function(){this.isEditing=!this.isEditing,this.events.editStateChange.fire()}}])&&i(n.prototype,o),r&&i(n,r),t}())||o;n.d(t,"a",(function(){return f}))},function(e,t,n){"use strict";n.r(t);var o=n(2);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var i=n(3);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r)},function(e,t){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}automate.directive({namespace:"webnote",key:"note-pan"})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u(t).call(this))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,automate.Directive),n=t,(o=[{key:"afterLink",value:function(){var e,t,n=this.$scope,o=new Hammer(this.$element);o.on("panstart",(function(){var o=n.props.model.position;e=o.x,t=o.y})),o.on("panmove",(function(o){var r=n.props.model.position;r.x=e+o.deltaX,r.y=t+o.deltaY}))}}])&&r(n.prototype,o),a&&r(n,a),t}())},function(e,t){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}automate.directive({namespace:"webnote",key:"note-resize"})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u(t).call(this))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,automate.Directive),n=t,(o=[{key:"afterLink",value:function(){var e,t,n=this.$scope,o=new Hammer(this.$element);o.on("panstart",(function(){var o=n.props.model.size;e=o.width,t=o.height})),o.on("panmove",(function(o){var r=n.props.model.size;r.width=e+o.deltaX,r.height=t+o.deltaY}))}}])&&r(n.prototype,o),a&&r(n,a),t}())},function(e,t,n){"use strict";var o,r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}automate.component({namespace:"webnote",key:"note",template:'<div class="note flex-box" :style.left="props.model.position.x" :style.top="props.model.position.y"\r\n    :style.width="props.model.size.width" :style.height="props.model.size.height" :style.zIndex="props.model.zIndex"\r\n    @mousedown="onMouseDown()">\r\n    <div class="flex-box flex-element flex-column relative-container">\r\n        <div class="note-tlb flex-box" *note-pan>\r\n            <button class="fa fa-close btn" @click="close()" *m-show="state.isEditing"></button>\r\n        </div>\r\n        <textarea class="note-content flex-element" *m-model="props.model.content"></textarea>\r\n        <div class="note-resize" *note-resize></div>\r\n    </div>\r\n</div>',inject:{noteService:r.a}})(o=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,a(t).call(this))).state.isEditing=!1,e.props.model=null,e.events.closed=new automate.Message,e.init(),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,automate.Component),n=t,(o=[{key:"init",value:function(){var e=this;this.state.isEditing=this.noteService.isEditing,this.noteService.events.editStateChange.on((function(){e.state.isEditing=e.noteService.isEditing})),this.$watchCollection("props.model",(function(){e.noteService.save()})),this.$watchCollection("props.model.position",(function(){e.noteService.save()}))}},{key:"onMouseDown",value:function(){this.noteService.isMaxZIndex(this.props.model.zIndex)||(this.props.model.zIndex=this.noteService.nextZIndex())}},{key:"close",value:function(){this.events.closed.fire()}},{key:"onDestroy",value:function(){}}])&&u(n.prototype,o),r&&u(n,r),t}())},function(e,t,n){"use strict";n(7);var o,r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}automate.component({namespace:"webnote",key:"app",template:'<div class="toolbar flex-box">\r\n    <button class="fa fa-plus-circle btn" @click="createNote()"></button>\r\n    <button class="fa fa-save btn" @click="saveNote()"></button>\r\n    <button class="fa fa-remove btn" @click="clearNote()"></button>\r\n    <button class="fa fa-edit btn" @click="editNote()"></button>\r\n</div>\r\n\r\n<div class="flex-element relative-container">\r\n    <note :model="note" *m-repeat="note in state.notes" @closed="removeNote(note)"></note>\r\n</div>',inject:{noteService:r.a}})(o=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,a(t).call(this))).noteService.load(),e.state.notes=e.noteService.getList(),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,automate.Component),n=t,(o=[{key:"createNote",value:function(){this.noteService.create(this.state.notes),this.noteService.save()}},{key:"saveNote",value:function(){this.noteService.save()}},{key:"clearNote",value:function(){this.noteService.removeAll(this.state.notes),this.noteService.save()}},{key:"removeNote",value:function(e){this.noteService.remove(this.state.notes,e),this.noteService.save()}},{key:"editNote",value:function(){this.noteService.toggleEdit()}}])&&u(n.prototype,o),r&&u(n,r),t}())},function(e,t,n){"use strict";n.r(t);n(5),n(4);var o=n(1);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r)},function(e,t,n){}])}));